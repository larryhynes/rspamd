options = {
	filters = ["spf", "dkim", "regexp"]
	url_tld = "${TESTDIR}/../lua/unit/test_tld.dat"
	pidfile = "${TMPDIR}/rspamd.pid"
	lua_path = "${TESTDIR}/../../contrib/lua-fun/?.lua"
}
logging = {
	type = "file",
	level = "debug"
	filename = "${TMPDIR}/rspamd.log"
}
metric = {
	name = "default",
	actions = {
		reject = 100500,
	}
	unknown_weight = 1
}

worker {
	type = normal
	bind_socket = ${LOCAL_ADDR}:${PORT_NORMAL}
	count = 1
	keypair {
		pubkey = "${KEY_PUB1}";
		privkey = "${KEY_PVT1}";
	}
}
modules {
    path = "${TESTDIR}/../../src/plugins/lua/"
}
multimap {
  DNSBL_MAP {
    type = "dnsbl";
    map = "rspamd.com";
  }
  IP_MAP {
    type = "ip";
    map = "${TESTDIR}/configs/maps/ip.list";
  }
  FROM_MAP {
    type = "from";
    filter = "email:domain";
    map = "${TESTDIR}/configs/maps/domains.list";
  }
  REGEXP_MAP {
    type = "from";
    filter = "email:addr";
    regexp = true;
    map = "${TESTDIR}/configs/maps/regexp.list";
  }
  DEPS_MAP {
    type = "from";
    filter = "email:addr";
    regexp = true;
    map = "${TESTDIR}/configs/maps/regexp.list";
    require_symbols = "R_SPF_ALLOW & REGEXP_MAP & !FROM_MAP";
  }
  RCPT_MAP {
    type = "rcpt";
    filter = "email:addr";
    symbols = ["SYM1"];
    map = "${TESTDIR}/configs/maps/multiple.list";
  }
}
